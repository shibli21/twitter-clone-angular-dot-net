<div
  (click)="showDialog()"
  class="cursor-pointer"
  pTooltip="view followers"
  tooltipPosition="bottom"
>
  <span class="font-bold">{{ followersCount }}</span> Followers
</div>

<div class="z-50">
  <p-dialog
    [(visible)]="display"
    [modal]="true"
    [breakpoints]="{ '960px': '500px' }"
    [style]="{ width: '500px' }"
    [draggable]="false"
    [resizable]="false"
    appendTo="body"
    [dismissableMask]="true"
  >
    <ng-template pTemplate="header">
      <div class="flex gap-2 items-start">
        <div class="overflow-hidden h-[40px] w-[40px] rounded-full">
          <img
            src="https://cdn.pixabay.com/photo/2016/11/18/23/38/child-1837375_960_720.png"
          />
        </div>
        <div class="flex-row">
          <h1 class="text-base font-bold">
            {{ user.firstName }} {{ user.lastName }}
          </h1>
          <p class="text-gray-600 text-sm">@{{ user.userName }}</p>
        </div>
      </div>
    </ng-template>

    <p
      class="text-red-500 font-bold text-center"
      *ngIf="followers.users.length === 0"
    >
      NO FOLLOWERS
    </p>

    <div *ngIf="followers.users && followers.users.length > 0">
      <h1 class="font-bold mb-2">Followers</h1>

      <div class="space-y-2">
        <div *ngFor="let user of followers.users">
          <div
            class="p-4 border rounded-md hover:bg-indigo-50 cursor-pointer transition"
            (click)="routeToProfile(user.id)"
          >
            <div class="flex w-full">
              <img
                class="w-10 h-10 object-cover rounded-full"
                [src]="
                  user.profilePictureUrl
                    ? user.profilePictureUrl
                    : 'https://avatars.dicebear.com/api/open-peeps/' +
                      user.userName +
                      '.svg'
                "
                alt="Neil image"
              />
              <div class="px-4" style="width: calc(100% - 2.5rem)">
                <p class="text-sm font-medium text-gray-900 truncate">
                  {{ user.firstName }} {{ user.lastName }}
                </p>
                <p class="text-sm truncate text-gray-500">{{ user.email }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="mt-4">
        <button
          pButton
          *ngIf="this.followers.page !== this.followers.lastPage"
          [disabled]="this.followers.page === this.followers.lastPage"
          class="w-full p-button-sm"
          [loading]="isLoading"
          [label]="'load more..'"
          (click)="loadMoreFollowers()"
        ></button>
      </div>
    </div>
    <ng-template pTemplate="footer"> </ng-template>
  </p-dialog>
</div>
