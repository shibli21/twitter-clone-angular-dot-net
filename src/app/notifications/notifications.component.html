<app-top-nav title="Notifications"></app-top-nav>
<div class="w-full">
  <div class="">
    <div class="w-full" *ngIf="paginatedNotifications">
      <ul
        class="divide-gray-200 divide-y"
        infinite-scroll
        (scrolled)="loadMore()"
        [fromRoot]="true"
        [immediateCheck]="true"
      >
        <li
          *ngFor="let notification of paginatedNotifications.notifications"
          class="cursor-pointer hover:bg-gray-100 hover:text-indigo-600 px-4 py-4 md:px-8"
          [ngClass]="!notification.isRead ? 'bg-gray-100' : 'bg-white'"
          (click)="markAsRead(notification)"
        >
          <div class="flex items-center space-x-4">
            <div class="flex-shrink-0">
              <i
                [ngClass]="
                  'pi pi-' + getNotificationTypeIcon(notification.type)
                "
              ></i>
            </div>
            <div class="flex-1 min-w-0">
              <p class="">
                {{ notification.message }}
              </p>
            </div>
          </div>
        </li>
      </ul>
      <div *ngIf="isLoading" class="py-10 flex justify-center">
        <app-spinner></app-spinner>
      </div>

      <p
        class="text-center py-10 font-semibold"
        *ngIf="
          paginatedNotifications.page === paginatedNotifications.totalPages &&
          !isLoading
        "
      >
        No more notification to show
      </p>
    </div>
  </div>
</div>
